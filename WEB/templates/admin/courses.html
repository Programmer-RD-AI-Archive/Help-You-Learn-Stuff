{% extends "/admin/base.html" %} {% block head %}
<style>
  .content {
    padding: 25px !important;
  }
</style>
<title>Home</title>

{% endblock %} {% block body %}
<div class="container">
  <div id="content" class="content"></div>
  <div class="dropdown">
    <button
      class="btn btn-secondary dropdown-toggle"
      type="button"
      id="dropdownMenuButton1"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      Add
    </button>
    <ul class="dropdown-menu" aria-labelledby="input">
      <li>
        <a type="input" value="input" id="input" class="dropdown-item" href="#"
          >Input</a
        >
      </li>
      <!-- <li>
        <a
          type="input"
          value="checkbox"
          id="checkbox"
          class="dropdown-item"
          href="#"
          >Check Box</a
        >
      </li>
      <li>
        <a
          type="input"
          value="big_input"
          id="big_input"
          class="dropdown-item"
          href="#"
          >Big Input</a
        >
      </li> -->
    </ul>
  </div>
  <input class="btn" type="submit" value="Submit" id="submit_btn" />
</div>
<script>
  var idx = 0;
  $("#input").click(function (e) {
    idx += 1;
    console.log(idx);
    document
      .getElementById("content")
      .insertAdjacentHTML(
        "beforeend",
        `<div class="mb-3"><label for="${idx.toString()}-Label" class="form-label"><input type="text" class="form-control" id="${idx.toString()}-Input-Name"></label><input type="text" class="form-control" id="${idx.toString()}-Content"></div>`
      );
  });
  $("#checkbox").click(function (e) {
    idx += 1;
    console.log(idx);
    document
      .getElementById("content")
      .insertAdjacentHTML(
        "beforeend",
        '  <div class="mb-3 form-check"><input type="checkbox" class="form-check-input" id="exampleCheck1"><label class="form-check-label" for="exampleCheck1">Check me out</label></div>'
      );
  });
  $("#big_input").click(function (e) {
    idx += 1;
    console.log(idx);
    document
      .getElementById("content")
      .insertAdjacentHTML(
        "beforeend",
        '<div class="mb-3"><label for="exampleFormControlTextarea1" class="form-label">Example textarea</label><textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea></div>'
      );
  });
  $("#submit_btn").click(function (e) {
    var data = {};
    for (idx_iter = 1; idx_iter <= idx; idx_iter++) {
      console.log(`${idx_iter.toString()}-Content`);
      console.log(`${idx_iter.toString()}-Input-Name`);
      var label = document.getElementById(
        `${idx_iter.toString()}-Input-Name`
      ).value;
      var content = document.getElementById(
        `${idx_iter.toString()}-Content`
      ).value;
      console.log(label);
      console.log(content);
      data[idx_iter] = { label: label, content: content };
    }
    yourdiv = $("#content").html();
    $.ajax({
      type: "POST",
      url: "/divinfo",
      data: { yourdiv: yourdiv, data: data },
    });
  });
</script>
{% endblock %}
